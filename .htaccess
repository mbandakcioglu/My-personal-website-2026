#
# Setting Wolf CMS requirements
#
# On some server configurations you may need to comment out one or more of
# the three lines below due to server limitations.
#

#php_flag magic_quotes_gpc off ## Removed in php5.4
AddDefaultCharset UTF-8
Options -Indexes +FollowSymLinks

#
# Setting rewrite rules
#


<IfModule mod_rewrite.c>
	RewriteEngine On
	
	# Canonical fixes
	RewriteCond %{HTTP_HOST} ^bandakcioglu.com
	RewriteCond %{REQUEST_URI} !^/[0-9]+\..+\.cpaneldcv$
	RewriteCond %{REQUEST_URI} !^/[A-F0-9]{32}\.txt(?:\ Comodo\ DCV)?$
	RewriteCond %{REQUEST_URI} !^/\.well-known/acme-challenge/[0-9a-zA-Z_-]+$
	RewriteRule (.*) https://www.bandakcioglu.com/$1 [R=301,L]

	RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\ HTTP/
	RewriteCond %{REQUEST_URI} !^/[0-9]+\..+\.cpaneldcv$
	RewriteCond %{REQUEST_URI} !^/[A-F0-9]{32}\.txt(?:\ Comodo\ DCV)?$
	RewriteCond %{REQUEST_URI} !^/\.well-known/acme-challenge/[0-9a-zA-Z_-]+$
	RewriteRule ^index\.php$ https://www.bandakcioglu.com [R=301,L]
	
	RewriteCond %{SERVER_PORT} !=443
	#RewriteRule ^ https://www.bandakcioglu.com%{REQUEST_URI} [NS,R,L]
	RewriteCond %{REQUEST_URI} !^/[0-9]+\..+\.cpaneldcv$
	RewriteCond %{REQUEST_URI} !^/[A-F0-9]{32}\.txt(?:\ Comodo\ DCV)?$
	RewriteCond %{REQUEST_URI} !^/\.well-known/acme-challenge/[0-9a-zA-Z_-]+$
	RewriteRule ^ https://www.bandakcioglu.com%{REQUEST_URI} [NS,R=301,L]

	RewriteCond %{HTTP:if-modified-since} .
	RewriteRule . /not_modified.php [L]

</IfModule>


# Enable GZIP 
<ifmodule mod_deflate.c> 
	AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x-javascript application/javascript 
	BrowserMatch ^Mozilla/4 gzip-only-text/html 
	BrowserMatch ^Mozilla/4\.0[678] no-gzip 
	BrowserMatch \bMSIE !no-gzip !gzip-only-text/html 
</ifmodule> 

# Expires Headers - 2678400s = 31 days 
#<ifmodule mod_expires.c> 
#	ExpiresActive On 
#	ExpiresDefault "access plus 2678400 seconds" 
#	ExpiresByType text/html "access plus 7200 seconds" 
#	ExpiresByType image/gif "access plus 2678400 seconds" 
#	ExpiresByType image/jpeg "access plus 2678400 seconds" 
#	ExpiresByType image/png "access plus 2678400 seconds" 
#	ExpiresByType text/css "access plus 750000 seconds" 
#	ExpiresByType text/javascript "access plus 2678400 seconds" 
#	ExpiresByType application/x-javascript "access plus 2678400 seconds" 
#</ifmodule> 
<IfModule mod_expires.c>
	# Enable expirations
	ExpiresActive On
	# Default directive
	ExpiresDefault "access plus 1 month"
	# My favicon
	ExpiresByType image/x-icon "access plus 1 year"
	# Images
	ExpiresByType image/gif "access plus 1 month"
	ExpiresByType image/png "access plus 1 month"
	ExpiresByType image/jpg "access plus 1 month"
	ExpiresByType image/jpeg "access plus 1 month"
	# CSS
	ExpiresByType text/css "access 1 month"
	# Data interchange
	ExpiresByType application/json "access plus 0 seconds"
	ExpiresByType application/xml "access plus 0 seconds"
	ExpiresByType text/xml "access plus 0 seconds"
	# Javascript
	ExpiresByType application/javascript "access plus 1 year"
	# Favicon (cannot be renamed!) and cursor images
	# HTML components (HTCs)
	ExpiresByType text/x-component "access plus 1 month"
	# HTML
	ExpiresByType text/html "access plus 0 seconds"
	# Manifest files
	ExpiresByType application/x-web-app-manifest+json "access plus 0 seconds"
	ExpiresByType text/cache-manifest "access plus 0 seconds"
	# Media
	ExpiresByType audio/ogg "access plus 1 month"
	ExpiresByType image/gif "access plus 1 month"
	ExpiresByType image/jpeg "access plus 1 month"
	ExpiresByType image/png "access plus 1 month"
	ExpiresByType video/mp4 "access plus 1 month"
	ExpiresByType video/ogg "access plus 1 month"
	ExpiresByType video/webm "access plus 1 month"
	# Web feeds
	ExpiresByType application/atom+xml "access plus 1 hour"
	ExpiresByType application/rss+xml "access plus 1 hour"
	# Web fonts
	ExpiresByType application/font-woff "access plus 1 month"
	ExpiresByType application/vnd.ms-fontobject "access plus 1 month"
	ExpiresByType application/x-font-ttf "access plus 1 month"
	ExpiresByType font/opentype "access plus 1 month"
	ExpiresByType image/svg+xml "access plus 1 month"
</IfModule> 
# Cache Headers 
<ifmodule mod_headers.c> 
	# Cache specified files for 31 days 
	<filesmatch "\.(ico|flv|jpg|jpeg|png|gif|css|swf)$"> 
		Header set Cache-Control "max-age=2678400, public" 
	</filesmatch> 
	# Cache HTML files for a couple hours 
	<filesmatch "\.(html|htm)$"> 
		Header set Cache-Control "max-age=7200, private, must-revalidate" 
	</filesmatch> 
	# Cache PDFs for a day 
	<filesmatch "\.(pdf)$"> 
		Header set Cache-Control "max-age=86400, public" 
	</filesmatch> 
	# Cache Javascripts for 31 days 
	<filesmatch "\.(js)$"> 
		Header set Cache-Control "max-age=2678400, private" 
	</filesmatch> 
</ifmodule>

  
